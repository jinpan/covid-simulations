<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Shopping Solo &middot; Coronavirus Simulations
    
  </title>

  
  <meta property="og:image" content="https://coronavirus.simrnd.com/shopping_solo/og_image.png" />
  

  
  <meta property="og:description" content="How does the number of shoppers a household sends out affect the spread of Covid-19?" />
  

  <!-- CSS -->
  <link rel="stylesheet" href=/assets/css/styles.css>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href=/assets/apple-touch-icon-precomposed.png>
  <link rel="shortcut icon" href=/assets/favicon.ico>

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="Coronavirus Simulations" href="/feed.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Simulating the spread of Coronavirus.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href=/>Home</a>

    

    
    
      
    
      
    
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
    
      
    
      
    
      
        
        <a class="sidebar-nav-item" href="/intro/">SIM&#58; Intro to Simulations</a>
        
      
    
      
    
      
        
        <a class="sidebar-nav-item active" href="/shopping_solo/">SIM&#58; Shopping Solo</a>
        
      
    
      
        
        <a class="sidebar-nav-item" href="/shopping_with_masks/">SIM&#58; Shopping with Masks</a>
        
      
    
      
    

    <a class="sidebar-nav-item" href="https://github.com/jinpan/covid-simulations">GitHub project</a>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2020. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href=/ title="Home">Coronavirus Simulations</a>
            <small></small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="page">
  <h1 class="page-title">Shopping Solo</h1>
  <script src="./shopping_solo.bundle.js"></script>

<h3 id="2020-05-15--jin-pan--follow-jinpan20">2020-05-15 | Jin Pan | <a href="https://twitter.com/jinpan20?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @jinpan20</a><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></h3>

<p><em>Before we dive in, you may want to check out the <a href="/intro">Intro to SIR/SEIR simulations post</a></em>.</p>

<blockquote>
  <p>How does the number of shoppers a household sends out affect the spread of Covid-19?</p>
</blockquote>

<p>To answer this question, letâ€™s run some
<span style="background-color:#B8F7BF">S</span><span style="background-color:#C7BA29">E</span><span style="background-color:#EB6383">I</span><span style="background-color:#C8C8C8">R</span>
simulations of a tiny community of 108 people split among 54 households
(2 people per household).  Everyone is social distancing, but households must
periodically make trips to the store as they run out of supplies.</p>

<p>Some households (marked <code class="highlighter-rouge">1x</code>) have a 1x shopper rule that only one person goes
shopping, and other households (marked as <code class="highlighter-rouge">2x</code>), both people will go out to
shop and stick together in the store. All parameters at this footnote<sup id="fnref:shopping_parameters"><a href="#fn:shopping_parameters" class="footnote">1</a></sup>.</p>

<p>You can configure the percentage of 2x shopper households and observe how that affects
disease spread.</p>

<div>
  <button id="particle_shopper0-start" style="width: 4em">Start</button>
  <button id="particle_shopper0-reset">Reset</button>
  <span>Speed:
    <button class="particle_shopper0-speed" data-speed="1" style="font-weight: bold" disabled="">1x</button>
    <button class="particle_shopper0-speed" data-speed="2">2x</button>
    <button class="particle_shopper0-speed" data-speed="4">4x</button>
    <button class="particle_shopper0-speed" data-speed="8">8x</button>
    <button class="particle_shopper0-speed" data-speed="16">16x</button>
    <button class="particle_shopper0-speed" data-speed="32">32x</button>
  </span>
  <br />
  <span>Percent of 2x shopper households:
    <button class="particle_shopper0-pct-dual-shopper" data-pct="0">0%</button>
    <button class="particle_shopper0-pct-dual-shopper" data-pct="25">25%</button>
    <button class="particle_shopper0-pct-dual-shopper" data-pct="50" style="font-weight: bold" disabled="">50%</button>
    <button class="particle_shopper0-pct-dual-shopper" data-pct="75">75%</button>
    <button class="particle_shopper0-pct-dual-shopper" data-pct="100">100%</button>
  </span>

  <br />
  <div id="particle_shopper0-uplot" style="border: solid; border-width: thin; display: inline-block; width:100%"></div>

  <canvas id="particle_shopper0-canvas" width="600" height="400" style="border:1px solid #000000; width:100%">
  </canvas>
</div>

<hr />

<h2 id="data-analysis">Data Analysis</h2>

<p>Running this simulation tens of thousands of times, we see that a 1% increase in
2x-shopper households leads to a ~0.96% increase in people infected at the end of
the simulations.</p>

<div style="border: solid; border-width: thin; display: inline-block">
    <div id="infection_rate_vs_pct_dual_shopper"></div>

    <div style="padding: 1em">
The shaded gray area contains the average 50% of outcomes across all the simulations.
The solid line is the median outcome, and the dotted line is the best fit.
    </div>
</div>

<blockquote>
  <p>What happens if a 1x households sends out a second shopper?</p>
</blockquote>

<p><strong>Each additional shopper infects 1.9 more people:</strong></p>

<ul>
  <li>An additional shopper means 1 more 2x shopper household, a <code class="highlighter-rouge">1/54</code> increase in the number of 2x households</li>
  <li>A 1% increase in number of 2x households leads to a <code class="highlighter-rouge">0.96</code>% increase in infected people</li>
  <li>There are <code class="highlighter-rouge">108</code> total people</li>
  <li><code class="highlighter-rouge">(1/54) * 0.96 * 108 = 1.92</code></li>
</ul>

<p>The intuition behind this is that the additional shopper increases the chances that they get infected, increasing
the chances their household gets infected, increasing the chances that someone in their household infects someone
else, and so on, setting off an infection chain reaction.  In epidemiology
terms, additional shoppers increase the
<a href="https://www.healthknowledge.org.uk/public-health-textbook/research-methods/1a-epidemiology/epidemic-theory">effective reproduction number</a>.</p>

<p>Our decisions absolutely matter and matter beyond ourselves.</p>

<hr />

<h3 id="how-does-this-affect-me">How does this affect me?</h3>

<blockquote>
  <p>How does imposing a 1x-shopper rule in <em>my</em> household affect the risk of
someone in <em>my</em> household getting the disease?</p>
</blockquote>

<div style="border: solid; border-width: thin; display: inline-block">
    <div id="infection_rate_by_household_type_vs_pct_dual_shopper"></div>

    <div style="padding: 1em">
The green area represents the average 50% of outcomes for
1x-shopper households; the red represents 2x-shopper households.
Lines represent the median outcome for the two types of households.
    </div>
</div>
<p>More details about this chart at this footnote<sup id="fnref:my_household_chart_details"><a href="#fn:my_household_chart_details" class="footnote">2</a></sup>.</p>

<p>Our decisions do not exist in a vacuum, and our rate of infection
depends on others within our community. What is interesting here is that
our decisions matter more when our community is more at risk - the gap between
household infection rates increases with the percentage of 2x-shopper households
community.</p>

<p><strong>Safer decisions matter more when our community is more at risk.</strong></p>

<p><strong>The more people we see not taking precautions, the more we need take precautions
ourselves.</strong></p>

<hr />

<h2 id="future-work">Future work</h2>

<p>The best way to combat this virus is to make data-driven policies and decisions.
High quality simulations offer a fast and safe way to estimate the risk of our actions.</p>

<p>That being said, the virus modeled above is not Covid-19 and the tiny community
does not capture real human behavior.  We order delivery services, maintain distance
in stores, self-quarantine if we are sick, and so on.  Researchers are discovering more about
Covid-19 every day, about how it spreads, symptoms it produces, how to treat it, and so on.</p>

<p>Future work will focus on incorporating the latest research and simulating more realistic human
behavior. These simulations are all <a href="https://www.github.com/jinpan/covid-simulations/">open source</a>.
You can reach out to me privately at <code class="highlighter-rouge">covid-contact@simrnd.com</code> or on Twitter.</p>

<p>Please share these simulations if you found them informative - as the above data shows, <strong>we all
need to work together to control the spread of the virus</strong>.</p>

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I built some <a href="https://twitter.com/hashtag/coronavirus?src=hash&amp;ref_src=twsrc%5Etfw">#coronavirus</a> simulations, exploring how the way we shop affects the infection rate. Check out the 60fps simulations at <a href="https://t.co/Qa2evarhM4">https://t.co/Qa2evarhM4</a>. <a href="https://t.co/fpGH25QzGM">pic.twitter.com/fpGH25QzGM</a></p>&mdash; Jin Pan (@JinPan20) <a href="https://twitter.com/JinPan20/status/1261462639516909569?ref_src=twsrc%5Etfw">May 16, 2020</a></blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p><a href="https://twitter.com/jinpan20?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @jinpan20</a><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<hr />

<iframe src="https://docs.google.com/forms/d/e/1FAIpQLScaAb4nP7WCOu7TaKnvmtKayJ81Zcs5BH8kmMBD3-Xf61dHzg/viewform?embedded=true" width="640" height="807" frameborder="0" marginheight="0" marginwidth="0">
    Feedback form
</iframe>

<hr />

<h3 id="related-work">Related work</h3>

<p>For more simulations, check out</p>
<ul>
  <li><a href="https://www.washingtonpost.com/graphics/2020/world/corona-simulator/">Harry Stevens of the Washington Post</a>.</li>
  <li><a href="https://www.youtube.com/watch?v=gxAaO2rsdIs">3Blue1Brown from YouTube</a>.</li>
</ul>

<h3 id="footnotes">Footnotes</h3>
<div class="footnotes">
  <ol>
    <li id="fn:shopping_parameters">
      <p>Simulation parameters:</p>
      <ul>
        <li>At 1x speed, each second is divided into 60 ticks.  At 2x speed, each second into 120 ticks, and so on.</li>
        <li>The map is a 600 x 400 grid.</li>
        <li>Within households and stores, people will move at 1 unit per tick, and bounce off of walls.</li>
        <li>On roads, people will move at 3 units per tick and take the shortest path from their household to the store
and vice versa.</li>
        <li>Households randomly start with 150-450 supplies, and consume 1 supply per tick.  This is independent of how many
people are in the household at that time.</li>
        <li>Households go shopping when the supply level hits 0.  However, the supply level will continue
dropping by 1 per tick and go negative.</li>
        <li>1x-shopper households will send out the same person each time they go shopping.</li>
        <li>At the store, 2x-shopper households stick together.</li>
        <li>Both types of households will spend 600 ticks at the store, not including time to travel to/from
the store.  Travel time depends on household distance to the store.</li>
        <li>Both types of households will buy 1800 supplies from the store and add them to the household supply levels.  This
is 1800 per household, <em>not</em> per person.</li>
        <li>Initially, two randomly chosen people are infected.  They could be from the same household with probability 1/103.</li>
        <li>Infectious people exhale 1 particle in a circle of radius 9 around them on the grid, once per tick</li>
        <li>People only inhale particles for the grid point that they are on.</li>
        <li>When a susceptible person inhales N particles, they have a N * 0.013% chance of becoming exposed during on that
tick.  They do not accumulate inhaled particles - each tick is independent of the previous.</li>
        <li>When initially exposed, people stay exposed for 900 ticks and become infectious for 2700 ticks before recovering.</li>
        <li>Each tick, the number of particles at each location on the grid decays by 5.5%</li>
      </ul>
      <p><a href="#fnref:shopping_parameters" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:my_household_chart_details">
      <p>Infection by Household Type vs % 2x Shopper Households chart notes</p>
      <ul>
        <li>Initially infected households were excluded from this data - their behavior does not cause them to be
infected.</li>
        <li>The green <code class="highlighter-rouge">25%</code> label represents the 25th percentile of infections among 1x shopper households.  The <code class="highlighter-rouge">75%</code> label
represents the 75th percentile, and the <code class="highlighter-rouge">50%</code> label represents the median.</li>
        <li>There is no data for 2x households at a 0% percentage of 2x households because there are no 2x households.  Same
for 1x households at 100%.</li>
      </ul>
      <p><a href="#fnref:my_household_chart_details" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165966353-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165966353-1');
</script>


  </body>
</html>
